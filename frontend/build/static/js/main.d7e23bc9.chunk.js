(this["webpackJsonpchess-analysis-app"]=this["webpackJsonpchess-analysis-app"]||[]).push([[0],{14:function(e,s,a){"use strict";a.r(s);var t=a(1),i=a.n(t),c=a(5),r=a.n(c),n=a(6);const d="/api";var l=a(3),o=a(2),b=a(0);o.a.register(...o.b);const m=e=>{let{data:s}=e;const a={labels:["Blunders","Mistakes","Inaccuracies"],datasets:[{label:"Mistakes by Type",data:[s.blunders,s.mistakes,s.inaccuracies],backgroundColor:["rgba(239, 68, 68, 0.7)","rgba(249, 115, 22, 0.7)","rgba(234, 179, 8, 0.7)"],borderColor:["rgba(239, 68, 68, 1)","rgba(249, 115, 22, 1)","rgba(234, 179, 8, 1)"],borderWidth:1}]};return Object(b.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[Object(b.jsx)("h3",{className:"font-medium mb-2",children:"Mistake Distribution"}),Object(b.jsx)(l.a,{data:a,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})]})},j=e=>{let{data:s}=e;const a={labels:["Opening","Middlegame","Endgame"],datasets:[{label:"Mistakes by Game Phase",data:[s.opening,s.middlegame,s.endgame],backgroundColor:"rgba(79, 70, 229, 0.7)",borderColor:"rgba(79, 70, 229, 1)",borderWidth:1,tension:.1}]};return Object(b.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[Object(b.jsx)("h3",{className:"font-medium mb-2",children:"Mistakes by Game Phase"}),Object(b.jsx)(l.b,{data:a,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})]})},h=e=>{let{data:s}=e;const a=s.slice(0,5),t={labels:a.map((e=>e.name)),datasets:[{label:"Mistakes per Opening",data:a.map((e=>e.mistakes)),backgroundColor:["rgba(99, 102, 241, 0.7)","rgba(129, 140, 248, 0.7)","rgba(165, 180, 252, 0.7)","rgba(199, 210, 254, 0.7)","rgba(224, 231, 255, 0.7)"],borderColor:["rgba(99, 102, 241, 1)","rgba(129, 140, 248, 1)","rgba(165, 180, 252, 1)","rgba(199, 210, 254, 1)","rgba(224, 231, 255, 1)"],borderWidth:1}]};return Object(b.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[Object(b.jsx)("h3",{className:"font-medium mb-2",children:"Top Openings by Mistakes"}),Object(b.jsx)(l.c,{data:t,options:{responsive:!0,plugins:{legend:{position:"right"}}}})]})};var g=()=>{var e;const[s,a]=Object(t.useState)([]),[i,c]=Object(t.useState)(null),[r,l]=Object(t.useState)(null),[o,g]=Object(t.useState)(null),[u,p]=Object(t.useState)(""),[x,O]=Object(t.useState)(!1);Object(t.useEffect)((()=>{u&&y()}),[u]);const y=async()=>{const e=await fetch(`/api/games?username=${u}`),s=await e.json();a(s)};return Object(b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[Object(b.jsx)("header",{className:"bg-indigo-600 text-white p-4",children:Object(b.jsx)("h1",{className:"text-2xl font-bold",children:"Chess Mistake Analyzer"})}),Object(b.jsxs)("main",{className:"container mx-auto p-4",children:[Object(b.jsxs)("div",{className:"mb-6",children:[Object(b.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Enter your chess username",className:"p-2 border rounded"}),Object(b.jsx)("input",{type:"file",accept:".pgn",onChange:async e=>{const s=e.target.files[0],a=new FileReader;a.onload=async e=>{const s=e.target.result;await(async e=>{const s=await fetch(`${d}/import`,{method:"POST",body:e});if(!s.ok)throw new Error("Import failed");return s.json()})(s),y()},a.readAsText(s)},className:"ml-4 p-2"})]}),Object(b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Object(b.jsx)("div",{className:"lg:col-span-1",children:Object(b.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[Object(b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Your Games"}),Object(b.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.map((e=>Object(b.jsxs)("div",{onClick:()=>c(e),className:"p-2 cursor-pointer rounded "+((null===i||void 0===i?void 0:i.id)===e.id?"bg-indigo-100":"hover:bg-gray-100"),children:[Object(b.jsxs)("div",{className:"flex justify-between",children:[Object(b.jsxs)("span",{children:[e.white," vs ",e.black]}),Object(b.jsx)("span",{children:e.result})]}),Object(b.jsx)("div",{className:"text-sm text-gray-500",children:e.date})]},e.id)))})]})}),Object(b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[i&&Object(b.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[Object(b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[Object(b.jsxs)("h2",{className:"text-xl font-semibold",children:[i.white," vs ",i.black," - ",i.result]}),Object(b.jsx)("button",{onClick:async()=>{if(i){O(!0);try{const e=await(async e=>{const s=await fetch(`${d}/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({game_id:e})});if(!s.ok)throw new Error("Analysis failed");return s.json()})(i.id);l(e);const s=await(async e=>{const s=await fetch(`${d}/stats?username=${e}`);if(!s.ok)throw new Error("Failed to get stats");return s.json()})(u);g(s)}finally{O(!1)}}},disabled:x,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-50",children:x?"Analyzing...":"Analyze Game"})]}),r&&Object(b.jsxs)("div",{className:"mt-4",children:[Object(b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Game Analysis"}),Object(b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object(b.jsx)("div",{children:Object(b.jsx)(n.a,{position:(null===(e=r.mistakes[0])||void 0===e?void 0:e.fen_before)||"start",boardWidth:400})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{className:"font-medium",children:"Mistakes Summary"}),Object(b.jsxs)("p",{children:["White mistakes: ",r.summary.white_mistakes]}),Object(b.jsxs)("p",{children:["Black mistakes: ",r.summary.black_mistakes]}),r.summary.worst_mistake&&Object(b.jsxs)("div",{className:"mt-4",children:[Object(b.jsx)("h4",{className:"font-medium",children:"Worst Mistake"}),Object(b.jsxs)("p",{children:["Move ",r.summary.worst_mistake.move_number,":",r.summary.worst_mistake.move_san]}),Object(b.jsxs)("p",{children:["Evaluation change: ",r.summary.worst_mistake.eval_diff]})]})]})]})]})]}),o&&Object(b.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[Object(b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Your Statistics"}),Object(b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Object(b.jsx)(m,{data:o.mistakeDistribution}),Object(b.jsx)(j,{data:o.timePressureStats}),Object(b.jsx)(h,{data:o.openingStats})]})]})]})]})]})]})};r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d7e23bc9.chunk.js.map